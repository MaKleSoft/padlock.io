{{ define "css" }}
    {{ template "basecss" . }}
    <link href="/css/home.css" rel="stylesheet" type="text/css">
    <link href="/css/device.css" rel="stylesheet" type="text/css">
{{ end }}

{{ define "js" }}
<script>
(() => {
    let scroller, scrollerHeight, wrapper, stage, currSection, phoneVideo;

    const sections = [
        {
            bounds: [0, 350],
            in: () => {
                stage.classList.add("hero");
                phoneVideo.src = "/img/v2.1-unlock.mp4";
            },
            out: () => {
                stage.classList.remove("hero");
            }
        },
        {
            bounds: [350, 800],
            in: () => {
                stage.classList.add("simple");
                phoneVideo.src = "/img/v2.1-open-record.mp4";
            },
            out: () => {
                stage.classList.remove("simple");
            }
        },
        {
            bounds: [950, 1300],
            in: () => {
                stage.classList.add("cross-platform");
                desktopVideo.play();
            },
            out: () => {
                stage.classList.remove("cross-platform");
            }
        }
    ];

    function scroll() {
        const st = scroller.scrollTop;
        const section = sections.find((s) => st >= s.bounds[0] && st < s.bounds[1]);

        if (section && section != currSection) {
            currSection && currSection.out && currSection.out();
            section && section.in && section.in();
            const originTop = section.bounds[0] + (section.bounds[1] - section.bounds[0]) / 2;
            currSection = section;
        }
    };


    window.addEventListener("load", () => {
        wrapper = document.querySelector(".device-wrapper");
        stage = document.querySelector(".device-stage");
        scroller = document.scrollingElement;
        scrollerHeight = scroller.offsetHeight;
        phoneVideo = wrapper.querySelector(".device.phone video");
        desktopVideo = wrapper.querySelector(".device.desktop video");
        desktopVideo.autoplay = false;
        desktopVideo.src = "/img/v2.1-sync-desktop.mp4";

        document.addEventListener("scroll", scroll);
        scroll();
    });
})();
</script>
{{ end }}

{{ define "header" }}
    {{ partial "header" . }}
{{ end }}

{{ define "main" }}
    <section class="hero">
        <div class="inner">
            <h1>All your sensitive data in one secure place.</h1>
            <h2>
                Padlock securely stores all of your passwords and other sensitive information for you
                so all you have to remember is a single master password!
            </h2>
            <div class="buttons">
                {{ partial "download-button" }}
                <!-- <a href="#" class="btn"> -->
                <!--     <span>Watch Video</span> -->
                <!--     <span class="icon icon&#45;play&#45;circle"></span> -->
                <!-- </a> -->
            </div>
        </div>
    </section>

    <section class="simple">
        <div class="inner">
            <h1>Beautifully Simple And Easy To Use.</h1>
            <h2>
                We know it can be tedious to learn using new software, so we made sure that Padlock
                is as easy to use as possible. Padlock focusses on the most essential features and
                make these as easy to use as possible. No clutter, no distractions!
            </h2>
        </div>
    </section>

    <section class="cross-platform">
        <div class="inner">
            <h1>Access Your Data Anywhere</h1>
            <h2>
                Padlock is available on all major platforms and synchronizing your devices
                is effortless and fast. Padlock Cloud securely stores your data in the cloud
                where you can easily access it from anywhere!
            </h2>
        </div>
    </section>

    <section class="showcase right">
        <div class="inner">
            <h1>Padlock <span class="icon-heart"></span> Open Source</h1>
            <h2>
                Padlock is the one, secure place to store all your passwords, pins, credit cards and other sensitive information.
                Strong encryptions makes sure that nobody other than you can ever access your data, not even we!
            </h2>
        </div>
    </section>

{{ end }}

{{ define "float" }}
    <div class="device-stage">
        <div class="device-wrapper">
            {{ partial "device" (dict "type" "phone") }}
            {{ partial "device" (dict "type" "desktop") }}
        </div>
    </div>
{{ end }}
