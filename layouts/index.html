{{ define "css" }}
    {{ template "basecss" . }}
    <link href="/css/home.css" rel="stylesheet" type="text/css">
    <link href="/css/device.css" rel="stylesheet" type="text/css">
{{ end }}

{{ define "js" }}
<script>
(() => {
    let scroller, scrollerHeight, device, deviceWrapper, currSection, video;

    const sections = [
        {
            bounds: [0, 400],
            in: () => {
                device.classList.add("hero");
                video.src = "/img/v2.1-unlock.mp4";
                video.play();
            },
            out: () => {
                device.classList.remove("hero");
            }
        },
        {
            bounds: [400, 1000],
            in: () => {
                device.classList.add("simple");
                video.src = "/img/v2.1-open-record.mp4";
                video.play();
            },
            out: () => {
                device.classList.remove("simple");
            }
        }
    ];

    function scroll() {
        const originTop = scroller.scrollTop + scrollerHeight / 2;
        deviceWrapper.style.perspectiveOrigin = `center ${originTop}px`;

        const st = scroller.scrollTop;
        const section = sections.find((s) => st >= s.bounds[0] && st < s.bounds[1]);

        if (section != currSection) {
            currSection && currSection.out && currSection.out();
            section && section.in && section.in();
            currSection = section;
        }
    };


    window.addEventListener("load", () => {
        device = document.querySelector(".device");
        deviceWrapper = document.querySelector(".device-wrapper");
        scroller = document.scrollingElement;
        scrollerHeight = scroller.offsetHeight;
        video = device.querySelector("video");

        document.addEventListener("scroll", scroll);
        scroll();
    });
})();
</script>
{{ end }}

{{ define "header" }}
    {{ partial "header" . }}
{{ end }}

{{ define "main" }}
    <section class="hero">
        <div class="inner">
            <h1>All your sensitive data in one secure place.</h1>
            <h2>
                Padlock securely stores all of your passwords and other sensitive information for you
                so all you have to remember is a single master password!
            </h2>
            <div class="buttons">
                {{ partial "download-button" }}
                <!-- <a href="#" class="btn"> -->
                <!--     <span>Watch Video</span> -->
                <!--     <span class="icon icon&#45;play&#45;circle"></span> -->
                <!-- </a> -->
            </div>
        </div>
    </section>

    <section class="simple">
        <div class="inner">
            <h1>Beautifully Simple And Easy To Use.</h1>
            <h2>
                We know it can be tedious to learn using new software, so we made sure that Padlock
                is as easy to use as possible. Padlock focusses on the most essential features and
                make these as easy to use as possible. No clutter, no distractions!
            </h2>
        </div>
    </section>

    <section class="showcase left">
        <div class="inner">
            <h1>Effortlessly synchronize all your devices.</h1>
            <h2>
                Padlock is the one, secure place to store all your passwords, pins, credit cards and other sensitive information.
                Strong encryptions makes sure that nobody other than you can ever access your data, not even we!
            </h2>
        </div>
    </section>

    <section class="showcase right">
        <div class="inner">
            <h1>Padlock <span class="icon-heart"></span> Open Source</h1>
            <h2>
                Padlock is the one, secure place to store all your passwords, pins, credit cards and other sensitive information.
                Strong encryptions makes sure that nobody other than you can ever access your data, not even we!
            </h2>
        </div>
    </section>

{{ end }}

{{ define "float" }}
    <div class="device-wrapper">
        {{ partial "device" (dict "video" "/img/v2.1-unlock.mp4") }}
    </div>
{{ end }}
