{{ define "css" }}
    {{ template "basecss" . }}
    <link href="/css/home.css" rel="stylesheet" type="text/css">
    <link href="/css/device.css" rel="stylesheet" type="text/css">
    <link href="/css/downloads.css" rel="stylesheet" type="text/css">
{{ end }}

{{ define "js" }}
<script>
(function() {
    var scroller, scrollerHeight, wrapper, stage, currSection,
        video1, video2, video3, scanCode, downloads, sectionSize;

    var sections = [
        {
            in: function() {
                stage.classList.add("hero");
                video1.classList.remove("hidden");
                video2.classList.add("hidden");
                scanCode.classList.add("hidden");
                video1.play();
            },
            out: function() {
                stage.classList.remove("hero");
            }
        },
        {
            in: function() {
                stage.classList.add("simple");
                video2.classList.remove("hidden");
                video1.classList.add("hidden");
                scanCode.classList.add("hidden");
                video2.play();
            },
            out: function() {
                stage.classList.remove("simple");
            }
        },
        {
            in: function() {
                stage.classList.add("portable");
                video3.classList.remove("hidden");
                downloads.classList.add("hidden");
                video3.play();
            },
            out: function() {
                stage.classList.remove("portable");
            }
        },
        {
            in: function() {
                stage.classList.add("transparent");
                video2.classList.add("hidden");
                video1.classList.add("hidden");
                scanCode.classList.remove("hidden");
            },
            out: function() {
                stage.classList.remove("transparent");
            }
        },
        {
            in: function() {
                stage.classList.add("tryit");
                video3.classList.add("hidden");
                downloads.classList.remove("hidden");
            },
            out: function() {
                stage.classList.remove("tryit");
            }
        }
    ];

    function scroll() {
        var section;
        for (var i = 0; i < sections.length; i++) {
            if (scroller.scrollTop >= i * sectionSize && scroller.scrollTop < (i + 1) * sectionSize) {
                section = sections[i];
                break;
            }
        }

        if (section && section !== currSection) {
            currSection && currSection.out && currSection.out();
            section && section.in && section.in();
            currSection = section;
        }
    };


    window.addEventListener("load", function() {
        wrapper = document.querySelector(".device-wrapper");
        stage = document.querySelector(".device-stage");
        scroller = document.scrollingElement || document.documentElement;
        scrollerHeight = window.innerHeight;
        video1 = wrapper.querySelectorAll(".device.phone video")[0];
        video2 = wrapper.querySelectorAll(".device.phone video")[1];
        video3 = wrapper.querySelector(".device.desktop video");
        scanCode = wrapper.querySelector(".device.phone .code");
        downloads = wrapper.querySelector(".device.desktop .downloads");
        sectionSize = (scroller.scrollHeight - scrollerHeight + 350) / (sections.length + 1);

        var lastScrollTop;
        setInterval(function() {
            if (lastScrollTop !== scroller.scrollTop) {
                scroll();
                lastScrollTop = scroller.scrollTop;
            }
        }, 200);
        scroll();
    });
})();
</script>
{{ end }}

{{ define "header" }}
    {{ partial "header" . }}
{{ end }}

{{ define "main" }}
    <section class="hero">
        <div class="inner">
            <h1>All your sensitive data in one secure place.</h1>
            <h2>
                Padlock stores all of your passwords and other sensitive information for you
                so all you have to remember is a single password!
            </h2>
            <div class="buttons">
                {{ partial "download-button" }}
            </div>
        </div>
    </section>

    <section class="simple">
        <div class="inner">
            <h1>Beautifully Simple.</h1>
            <h2>
                We know you have better things to do than to spend hours
                learning how to use new software, so we made Padlock as simple
                and easy to use as possible. While other apps boast about their
                long list of shiny, cool features, we focus on security,
                usability and performance instead. No clutter, no distractions!
            </h2>
            <a href="/downloads/">Try It Now. It's Free! &raquo;</a>
        </div>
    </section>

    <section class="portable">
        <div class="inner">
            <h1>Effortlessly Portable.</h1>
            <h2>
                Padlock is available on all major platforms and synchronizing
                your devices is fast and easy. Padlock Cloud securely stores
                your data online where you have access to it from anywhere, any
                time!
            </h2>
            <a href="/downloads/">&raquo; Download Padlock For Your Platform</a>
            <a href="https://cloud.padlock.io/">&raquo; Learn More About Padlock Cloud</a>
        </div>
    </section>

    <section class="transparent">
        <div class="inner">
            <h1>Completely Transparent.</h1>
            <h2>
                We believe that transparency and openness is the best
                foundation for trust so we are building Padlock completely out
                in the open. Our source code is developed under an open source
                licence so any one can review it, provide feedback and even
                offer contrubitions at any time!
            </h2>
            <a href="{{ .Param "githubUrl" }}">Find Padlock On Github &raquo;</a>
        </div>
    </section>

    <section class="tryit">
        <div class="inner">
            <h1>Go Ahead, Try It!</h1>
            <h2>
                Padlock is free and getting started takes only a few seconds.
                Give it a go, we're sure you'll love it!
            </h2>
            <a href="/downloads/">&raquo; Download Padlock</a>
        </div>
    </section>

{{ end }}

{{ define "float" }}
    {{ partial "device" . }}
{{ end }}
